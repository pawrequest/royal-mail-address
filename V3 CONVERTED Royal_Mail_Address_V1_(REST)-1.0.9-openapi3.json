{
  "openapi": "3.0.0",
  "info": {
    "x-ibm-name": "royal-mail-address-v1-rest",
    "title": "Royal Mail Address V1 (REST)",
    "version": "1.0.9",
    "description": "Royal Mail API for Address matching. Eg. Finding addresses or retrieving address details."
  },
  "paths": {
    "/address": {
      "post": {
        "summary": "To find address summary with unique address id.",
        "description": "To find address summary with unique address id.",
        "operationId": "address.find",
        "responses": {
          "200": {
            "description": "detailed information about given collection.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/addressesDef"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request. A malformed request has been received.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/400"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/401"
                }
              }
            }
          },
          "404": {
            "description": "Not Found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/404"
                }
              }
            }
          },
          "405": {
            "description": "Method Not Allowed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/405"
                }
              }
            }
          },
          "500": {
            "description": "An unexpected error has occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/500"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable. \nThe API is currently unavailable.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/503"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/parameters/X-RMG-Language"
          },
          {
            "$ref": "#/parameters/X-RMG-Date-Time"
          },
          {
            "$ref": "#/parameters/Accept"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/addressFindRequestDef"
              }
            }
          }
        }
      }
    },
    "/address/{addressId}": {
      "get": {
        "summary": "To retrieve complete details for an address.",
        "description": "To retrieve complete details for an address.",
        "operationId": "address.retrieve",
        "responses": {
          "200": {
            "description": "detailed information about given collection.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/addressRecordDef"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request. A malformed request has been received.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/400"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/401"
                }
              }
            }
          },
          "404": {
            "description": "Not Found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/404"
                }
              }
            }
          },
          "405": {
            "description": "Method Not Allowed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/405"
                }
              }
            }
          },
          "500": {
            "description": "An unexpected error has occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/500"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable. \nThe API is currently unavailable.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/503"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "addressId",
            "in": "path",
            "required": true,
            "description": "Unique identifier for address record retrieval",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/parameters/X-RMG-Language"
          },
          {
            "$ref": "#/parameters/X-RMG-Date-Time"
          },
          {
            "$ref": "#/parameters/Accept"
          }
        ]
      }
    },
    "/address/dps": {
      "post": {
        "summary": "To find matching addresses with DPS, AQI and AVC.",
        "description": "To find matching addresses with DPS, AQI and AVC.",
        "operationId": "address.verify",
        "responses": {
          "200": {
            "description": "detailed information about given collection.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/addressVerifyRespDef"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request. A malformed request has been received.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/400"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/401"
                }
              }
            }
          },
          "404": {
            "description": "Not Found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/404"
                }
              }
            }
          },
          "405": {
            "description": "Method Not Allowed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/405"
                }
              }
            }
          },
          "500": {
            "description": "An unexpected error has occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/500"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable. \nThe API is currently unavailable.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/503"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/parameters/X-RMG-Language"
          },
          {
            "$ref": "#/parameters/X-RMG-Date-Time"
          },
          {
            "$ref": "#/parameters/Accept"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/addressVerifyRequestDef"
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "400": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "400",
          "httpMessage": "Bad Request",
          "errors": [
            {
              "code": "E1398",
              "description": "[Field] is required and must not be empty",
              "cause": "Missing or empty or invalid mandatory field",
              "resolution": "Check mandatory field(s) and resubmit"
            }
          ]
        }
      },
      "401": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "401",
          "httpMessage": "Unauthorized",
          "moreInformation": "Invalid client id or secret."
        }
      },
      "404": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "404",
          "httpMessage": "Not Found",
          "moreInformation": "No resources match requested URI"
        }
      },
      "405": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "405",
          "httpMessage": "Method Not Allowed",
          "moreInformation": "The method is not allowed for the requested URL"
        }
      },
      "500": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "500",
          "httpMessage": "Internal Server Error",
          "errors": [
            {
              "code": "E0000",
              "description": "Internal exception occurred",
              "cause": "An internal error was identified while attempting to process your API request",
              "resolution": "Please try again later"
            }
          ]
        }
      },
      "503": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorResponse"
          }
        ],
        "example": {
          "httpCode": "503",
          "httpMessage": "Service Unavailable",
          "errors": [
            {
              "code": "E0001",
              "description": "Service unavailable",
              "cause": "An internal error was identified while attempting to process your API request",
              "resolution": "Please try again later"
            }
          ]
        }
      },
      "errorResponse": {
        "properties": {
          "httpCode": {
            "type": "string",
            "description": "HTTP error code.  Please note that this will only be populated in the event of an error condition.",
            "example": "400"
          },
          "httpMessage": {
            "type": "string",
            "description": "HTTP error code description. Please note that this will only be populated in the event of an error condition.",
            "example": "Bad Request"
          },
          "moreInformation": {
            "type": "string",
            "description": "Information relating to the error condition."
          },
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/errorsDef"
            }
          }
        },
        "additionalProperties": false,
        "required": [
          "httpCode",
          "httpMessage"
        ]
      },
      "errorsDef": {
        "properties": {
          "code": {
            "type": "string",
            "description": "Code associated with the error condition",
            "example": "E1142"
          },
          "description": {
            "type": "string",
            "description": "Description of the error condition",
            "example": "Barcode reference WL902730228GB is not recognised"
          },
          "cause": {
            "type": "string",
            "description": "Cause of the error (if known)",
            "example": "A mail item with that barcode cannot be located"
          },
          "resolution": {
            "type": "string",
            "description": "Description of the resolution and action required to correct the error",
            "example": "Check barcode and resubmit"
          }
        },
        "additionalProperties": false,
        "description": "Array containing error information."
      },
      "addressVerifyRequestDef": {
        "type": "object",
        "properties": {
          "Addresses": {
            "type": "array",
            "minItems": 1,
            "maxItems": 100,
            "items": {
              "$ref": "#/components/schemas/addressVerifydef"
            }
          }
        }
      },
      "addressVerifydef": {
        "type": "object",
        "properties": {
          "addressLine1": {
            "type": "string",
            "minLength": 1,
            "maxLength": 64,
            "example": "1 Elmgrove Rd"
          },
          "addressLine2": {
            "type": "string",
            "maxLength": 64,
            "example": "Weybridge"
          },
          "addressLine3": {
            "type": "string",
            "maxLength": 64,
            "example": "string"
          },
          "postTown": {
            "type": "string",
            "minLength": 1,
            "maxLength": 64,
            "example": "Northamptonshire"
          },
          "County": {
            "type": "string",
            "maxLength": 64,
            "example": "Northamptonshire"
          },
          "postcode": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10,
            "example": "NN15QS"
          }
        },
        "required": [
          "addressLine1",
          "postcode",
          "postTown"
        ],
        "description": "Summary of the matching address"
      },
      "addressVerifyRespDef": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/addressVerifyReqRespdef"
        },
        "description": "Summary of the matching address"
      },
      "addressVerifyReqRespdef": {
        "type": "object",
        "properties": {
          "Input": {
            "$ref": "#/components/schemas/addressVerifydef"
          },
          "DPS": {
            "type": "string",
            "maxLength": 2,
            "example": "1F"
          }
        },
        "description": "Returns the DPS"
      },
      "addressFindRequestDef": {
        "type": "object",
        "properties": {
          "addressText": {
            "type": "string",
            "maxLength": 200,
            "minLength": 12,
            "description": "Full address search string",
            "example": "1 Elmgrove Rd, Weybridge KT13 8AA"
          }
        },
        "additionalProperties": false,
        "description": "Address search string",
        "required": [
          "addressText"
        ]
      },
      "addressesDef": {
        "properties": {
          "addresses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/addressSummaryDef"
            }
          }
        }
      },
      "addressSummaryDef": {
        "properties": {
          "addressId": {
            "type": "string",
            "maxLength": 30,
            "description": "Unique identifier for address record retrieval",
            "example": "GB|RM|A|53946200"
          },
          "type": {
            "type": "string",
            "maxLength": 50,
            "description": "Type of the response entity",
            "example": "address"
          },
          "addressSummary1": {
            "type": "string",
            "maxLength": 200,
            "description": "Address Line 3",
            "example": "addressLine3"
          },
          "addressSummary2": {
            "type": "string",
            "maxLength": 200,
            "description": "PostTown",
            "example": "London"
          },
          "highlight": {
            "type": "string",
            "maxLength": 50,
            "description": "A list of number ranges identifying the matched characters in the Text and Description",
            "example": "0-2,6-4;0-3"
          }
        },
        "additionalProperties": false,
        "description": "Summary of the matching address"
      },
      "addressRecordDef": {
        "properties": {
          "addressId": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Unique identifier for address record retrieval",
            "example": "GB|RM|A|53946128"
          },
          "DomesticId": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Domestic ID",
            "example": 53946128
          },
          "Language": {
            "type": "string",
            "maxLength": 10,
            "minLength": 1,
            "description": "Language of the result",
            "example": "ENG"
          },
          "LanguageAlternatives": {
            "type": "string",
            "maxLength": 10,
            "minLength": 1,
            "description": "Available language alternatives",
            "example": "ENG"
          },
          "Department": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Department",
            "example": "Misc"
          },
          "Company": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Company name",
            "example": "Royal Mail"
          },
          "SubBuilding": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Building name",
            "example": "Royal Mail"
          },
          "BuildingNumber": {
            "type": "string",
            "maxLength": 10,
            "minLength": 1,
            "description": "Building number",
            "example": 5
          },
          "BuildingName": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Building name",
            "example": "Royal Mail"
          },
          "SecondaryStreet": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Secondary Street name",
            "example": "Abington street"
          },
          "Street": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Street name",
            "example": "Abington street"
          },
          "Block": {
            "type": "string",
            "maxLength": 10,
            "minLength": 1,
            "description": "block number",
            "example": 10
          },
          "Neighbourhood": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Neighbourhood name",
            "example": "Royal Mail"
          },
          "District": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "description": "District name",
            "example": "Northamptonshire"
          },
          "City": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "description": "City name",
            "example": "London"
          },
          "Line1": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "description": "Address Line 1",
            "example": "Denmark Road"
          },
          "Line2": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "description": "Address Line 2",
            "example": "Abington avenue"
          },
          "Line3": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "description": "Address Line 3",
            "example": "GB|RM|A|53946128"
          },
          "Line4": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "description": "Address Line 4",
            "example": "GB|RM|A|53946128"
          },
          "Line5": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "description": "Address Line 5",
            "example": "GB|RM|A|53946128"
          },
          "AdminAreaName": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Admin area",
            "example": "GB|RM|A|53946128"
          },
          "AdminAreaCode": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Admin area code",
            "example": "GB|RM|A|53946128"
          },
          "Province": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Province",
            "example": "GB|RM|A|53946128"
          },
          "ProvinceName": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "ProvinceName",
            "example": "GB|RM|A|53946128"
          },
          "ProvinceCode": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Province Code",
            "example": "GB|RM|A|53946128"
          },
          "PostalCode": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Postal Code",
            "example": "GB|RM|A|53946128"
          },
          "CountryName": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "description": "Country Name",
            "example": "GB|RM|A|53946128"
          },
          "CountryIso2": {
            "type": "string",
            "maxLength": 2,
            "minLength": 1,
            "description": "2 digit Country Iso code",
            "example": "GB|RM|A|53946128"
          },
          "CountryIso3": {
            "type": "string",
            "maxLength": 3,
            "minLength": 1,
            "description": "3 digit Country Iso code",
            "example": "GB|RM|A|53946128"
          },
          "CountryIsoNumber": {
            "type": "string",
            "maxLength": 10,
            "minLength": 1,
            "description": "Country Iso Number",
            "example": "GB|RM|A|53946128"
          },
          "SortingNumber1": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Sorting Number 1",
            "example": "GB|RM|A|53946128"
          },
          "SortingNumber2": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Sorting Number 2",
            "example": "GB|RM|A|53946128"
          },
          "Barcode": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Barcode with DPS",
            "example": "GB|RM|A|53946128"
          },
          "POBoxNumber": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "PO Box Number",
            "example": "GB|RM|A|53946128"
          },
          "Label": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "description": "Label",
            "example": "GB|RM|A|53946128"
          },
          "Type": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Type",
            "example": "GB|RM|A|53946128"
          },
          "DataLevel": {
            "type": "string",
            "maxLength": 30,
            "minLength": 1,
            "description": "Data Level",
            "example": "GB|RM|A|53946128"
          }
        },
        "additionalProperties": false,
        "description": "Full and detailed address record as available in the address store"
      }
    },
    "securitySchemes": {
      "Client-Id": {
        "type": "apiKey",
        "description": "Royal Mail Internal API Gateway unique client identifier.",
        "in": "header",
        "name": "X-IBM-Client-Id"
      },
      "Client-Secret": {
        "type": "apiKey",
        "description": "Royal Mail Internal API Gateway unique client secret.",
        "in": "header",
        "name": "X-IBM-Client-Secret"
      }
    }
  },
  "security": [
    {
      "Client-Id": [],
      "Client-Secret": []
    }
  ],
  "servers": [
    {
      "url": "https://api.royalmail.net/addressfind/v1"
    }
  ]
}